<div *ngIf="!loading " class="lg:mx-6 mx-auto bg-white shadow-xl rounded-2xl overflow-hidden">
    <div class="p-6 md:p-8">
        <div class="flex flex-col md:flex-row justify-between items-center mb-6 md:mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 md:mb-0">Historique de tous les transactions</h2>
            <div class="flex flex-wrap gap-2">
                <button (click)="filterByDate('all')"
                    [ngClass]="{'bg-blue-500 text-white': activePeriod === 'all', 'bg-gray-200 text-gray-700': activePeriod !== 'all'}"
                    class="px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                    Tous
                </button>
                <button (click)="filterByDate('today')"
                    [ngClass]="{'bg-blue-500 text-white': activePeriod === 'today', 'bg-gray-200 text-gray-700': activePeriod !== 'today'}"
                    class="px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                    Jour
                </button>
                <button (click)="filterByDate('week')"
                    [ngClass]="{'bg-blue-500 text-white': activePeriod === 'week', 'bg-gray-200 text-gray-700': activePeriod !== 'week'}"
                    class="px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                    Semaine
                </button>
                <button (click)="filterByDate('month')"
                    [ngClass]="{'bg-blue-500 text-white': activePeriod === 'month', 'bg-gray-200 text-gray-700': activePeriod !== 'month'}"
                    class="px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                    Mois
                </button>   
            </div>
        </div>


        <!-- Search bar -->
        <div class="mb-6">
            <div class="relative">
                <input [(ngModel)]="searchQuery" (input)="onSearchChange()" type="text"
                    placeholder="Rechercher une transaction..."
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <button class="absolute right-2 top-1/2 transform -translate-y-1/2">
                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </button>
            </div>
        </div>

        <app-transaction-list [transactions]="transactions"></app-transaction-list>

        <app-pagination [currentPage]="currentPage" [totalPages]="totalPages" (pageChange)="onPageChange($event)">
        </app-pagination>
    </div>
</div>

<div *ngIf="loading" class="flex items-center justify-center h-screen">
    <div class="loader border-t-transparent border-4 border-blue-500 border-solid rounded-full w-16 h-16 animate-spin">
    </div>
</div>